After burying Dobby at the garden of the Shell cottage, Harry Potter (Daniel Radcliffe) convinces Griphook (Warwick Davis) to help them get to Lestrange's vault in Gringotts, to retrieve one of Voldemort's Horcruxes in exchange for Godric Gryffindor's Sword. Meanwhile, Ollivander (John Hurt), the Wandmaker warns Harry that he won't stand a chance with Voldemort (Ralph Fiennes) who has the Elder Wand. They arrived in Gringotts, Hermione (Emma Watson) disguised as Bellatrix (Helena Bonham Carter), using a Polyjuice Potion, Ron (Rupert Grint) disguised as a random wizard while Harry and Griphook go under the Invisibility Cloak. With the help of Imperius curse, they manage to get to the carts that take them down to the vaults, but when their cover is blown, Gringotts security attacks them. They manage to get to Lestrange's vault and find the Horcrux, Helga Hufflepuff's Cup, at which Griphook betrays them and flees with the sword yelling "Thieves! Thieves!" Harry grabs the Horcrux and the trio escape using a captive dragon. As they swim ashore of a lake, after jumping off the dragon, Harry has a vision about Voldemort receiving the news that the Horcrux was stolen. Harry sees that Voldemort is angry and scared. Voldemort kills the goblins, including Griphook, that bring him the news. Harry also sees that the next Horcrux is related to Rowena Ravenclaw, and is in Hogwarts castle.

The three Apparate to Hogsmeade in hopes of sneaking into the school but a Caterwauling charm is set off that warns the Death Eaters of the trio's arrival. They are saved by Aberforth Dumbledore (Ciar√°n Hinds), Albus's brother, who Harry has seen through the mirror that he has. The trio use a passageway to Hogwarts provided by Aberforth, with Neville Longbottom (Matthew Lewis) leading the way. The group arrives at the Room of Requirement where Dumbledore's Army made a resistance from Snape's regime. As headmaster, Snape (Alan Rickman) has turned Hogwarts into a lifeless prison. Harry confronts him in front of the entire school by saying, "How dare you stand where he stood. Tell them how it happened that night. How you looked him in the eye, a man who trusted you, and killed him" (referring to Albus Dumbledore). Minerva McGonagall (Maggie Smith) intervenes and fights Severus, who flees to his master. Meanwhile, Voldemort has summoned his army and surrounds Hogwarts.

McGonagall and the other Hogwarts staff made a barrier to keep the school safe from any attack. Hermione and Ron go to the Chamber of Secrets to get a basilisk fang (which can destroy Horcruxes), destroy Hufflepuff's Cup, and abruptly kiss. Harry, with the help of Rowena Ravenclaw's ghost daughter, Helena, finds out that the Ravenclaw Diadem was hidden, by Voldemort, in the Room of Requirement. He goes there, but is confronted by Malfoy and friends. When one of Malfoy's cohorts creates an unstoppable fire (and perishes due to it), Harry, Ron and Hermione rush to escape on brooms. They save Malfoy (Tom Felton) and his other friend on the way. They destroy the diadem using a basilisk fang. Voldemort uses the Elder Wand to destroy the shield around Hogwarts.
